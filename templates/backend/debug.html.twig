{% extends 'includes/backend_sidebar.html.twig' %}

{% block title %}Asitur{% endblock %}

{% block stylesheets %}
{{parent()}}

    <link rel="stylesheet" href="{{ asset('css/backend/style-backend_general.css') }}">

{% endblock %}

{% block content %}

    <!--Page Title-->
    <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
    <div id="page-title">
        <h1 class="page-header text-overflow">{{"sidebar.debug"|trans}}</h1>
    </div>
    <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
    <!--End page title-->

    <!--Page content-->
    <!--===================================================-->
    <div id="page-content">

        <div id = 'container_login'>
            <div class='row'>
                 <div class='col-md-4 col-md-offset-4'>
                    <div>
                        <div class="panel media pad-all">
                            <div class="media-left">
                                <span class="icon-wrap icon-wrap-sm icon-circle bg-success">
                                <i class="fa fa-user fa-2x"></i>
                                </span>
                            </div>
                
                            <div class="media-body">
                                <div class='row' style='margin-top: 13px;'>
                                    <div class='col-sm-6 col-md-6 col-lg-6'>
                                        <input id="debug_code" value="{% if isTestingIP %}asiturmola{% endif %}" type="password" class="form-control asitur_input data_input" maxlength="50">
                                    </div>
                                    <div class='col-sm-6 col-md-6 col-lg-6'>
                                        <button id="btnLogin" class="form-control btn btn-block btn-primary">
                                            {{"login.form.submit"|trans}}
                                        </button>                    
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    

        <div id = 'container_debug' style="display:none;">
        </div>
    

    </div>
    <!--===================================================-->
    <!--End page content-->

{% endblock %}

{% block javascripts %}
    {{parent()}}

<script>
    $(document).ready(function(){
        $("#debug_li").addClass("active-link");

        $('#debug_code').keydown(function( event ) {
            if (event.which == 13)
                $('#btnLogin').trigger('click');
        });

        $('#btnLogin').click(function(){
            if ($('#debug_code').val() == ''){
                  swal.fire({
                        title: "{{'login.form.set_password'|trans}}",
                        html: "",
                        icon: 'info',
                        showConfirmButton: true
                    });
            }
            else{
                $.ajax({
                    url:'{{ path("backend_debug_panel_login") }}',
                    data: {
                        'password': $('#debug_code').val()
                    },
                    type:"POST",
                    success: function(data){
                        $('#container_debug').html(data);
                    },
                    error:function(err){
                        swal.fire({
                            title: err,
                            html: '',
                            icon: 'error',
                            showConfirmButton: true
                        });
                    }
                });
            }

        });// login


    });

   
</script>


{% endblock %}